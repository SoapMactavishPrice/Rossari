<template>
    <div style="height: 80vh; overflow-y: auto;">
        <lightning-card>
            <div class="slds-p-around_xx-small slds-text-align_center slds-border_bottom slds-theme_shade"
                style="margin-left: -4px; background-color: #9d0b0f; color: #ffffff;">
                <h3 class="slds-text-heading_small slds-m-vertical_none">Update Address</h3>
            </div>

            <!-- Body -->
            <div class="slds-p-around_medium">
                <lightning-record-edit-form object-api-name="Lead" record-id={recordId} onsuccess={handleSuccess}>
                    <lightning-messages></lightning-messages>

                    <div class="slds-text-heading_small slds-m-bottom_small">Billing Address</div>

                    <div class="slds-grid slds-wrap slds-gutters slds-var-m-bottom_medium">
                        <!-- Street 1 -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-input label="Billing Street 1" value={street1} data-id="street1"
                                onchange={handleInputChange}>
                            </lightning-input>
                        </div>

                        <!-- Billing Street 2 -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-input label="Billing Street 2" value={street2} data-id="street2"
                                onchange={handleInputChange}>
                            </lightning-input>
                        </div>

                        <!-- Billing Street 3 -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-input label="Billing Street 3" value={street3} data-id="street3"
                                onchange={handleInputChange}>
                            </lightning-input>
                        </div>

                        <!-- Region -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-combobox name="region" label="Billing Region" value={regionValue}
                                placeholder="Select Region" options={regionOptions} onchange={handleRegionChange}
                                data-id="region">
                            </lightning-combobox>
                        </div>

                        <!-- Country -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-combobox name="country" label="Billing Country" value={countryId}
                                placeholder="Select Country" options={countryOptions} onchange={handleInputChange}
                                data-id="countryId">
                            </lightning-combobox>
                        </div>

                        <!-- Billing Pincode -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-record-picker label="Billing Pin Code" object-api-name="Pin_Code__c"
                                display-field="Name" value-field="Id" value={currentPinCodeId}
                                placeholder="Search Pin Code..." onchange={handleInputChange}
                                disabled={isPinCodeLoading} data-id="pincode">
                            </lightning-record-picker>

                            <template if:true={isPinCodeLoading}>
                                <div class="slds-spinner_container">
                                    <div class="slds-spinner slds-spinner_small" role="alert">
                                        <span class="slds-assistive-text">Loading</span>
                                        <div class="slds-spinner__dot-a"></div>
                                        <div class="slds-spinner__dot-b"></div>
                                    </div>
                                </div>
                            </template>
                        </div>

                        <!-- City -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-record-picker label="Billing City" object-api-name="City__c" display-field="Name"
                                value-field="Id" placeholder="Search City..." value={cityId}
                                onchange={handleInputChange} data-id="cityId">
                            </lightning-record-picker>
                        </div>

                        <!-- State -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-record-picker label="Billing State" object-api-name="State__c"
                                display-field="Name" value-field="Id" placeholder="Search State..." value={stateId}
                                onchange={handleInputChange} data-id="stateId">
                            </lightning-record-picker>
                        </div>

                        <!-- Zone -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-combobox name="zone" label="Billing Zone" value={zoneValue}
                                placeholder="Select Zone" options={zoneOptions} onchange={handleZoneChange}
                                data-id="zone">
                            </lightning-combobox>
                        </div>
                    </div>

                    <!-- Checkbox -->
                    <div class="slds-m-bottom_medium slds-border_top slds-p-top_medium">
                        <lightning-input type="checkbox" label="Copy Bill to To Ship to" checked={copyBillingToShipping}
                            onchange={handleCheckboxChange}>
                        </lightning-input>
                    </div>

                    <!-- SHIPPING ADDRESS SECTION -->
                    <div class="slds-text-heading_small slds-m-bottom_small slds-border_top slds-p-top_medium">
                        Shipping Address
                    </div>

                    <div class="slds-grid slds-wrap slds-gutters slds-var-m-bottom_medium">
                        <!-- Street 1 -->
                        <!-- Shipping Street 1 -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-input label="Shipping Street 1" value={shippingStreet1} data-id="shippingStreet1"
                                onchange={handleInputChange}>
                            </lightning-input>
                        </div>

                        <!-- Shipping Street 2 -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-input label="Shipping Street 2" value={shippingStreet2} data-id="shippingStreet2"
                                onchange={handleInputChange}>
                            </lightning-input>
                        </div>

                        <!-- Shipping Street 3 -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-input label="Shipping Street 3" value={shippingStreet3} data-id="shippingStreet3"
                                onchange={handleInputChange}>
                            </lightning-input>
                        </div>

                        <!-- Pincode -->
                        <!-- Shipping Pin Code -->
                        <div class="slds-col slds-size_1-of-3">
                            <template if:true={shippingPinCodeId}>
                                <lightning-record-picker label="Shipping Pin Code" object-api-name="Pin_Code__c"
                                    display-field="Name" value-field="Id" placeholder="Search Pin Code..."
                                    value={shippingPinCodeId} onchange={handleInputChange} data-id="shippingPincode">
                                </lightning-record-picker>
                            </template>
                            <template if:false={shippingPinCodeId}>
                                <lightning-record-picker label="Shipping Pin Code" object-api-name="Pin_Code__c"
                                    display-field="Name" value-field="Id" placeholder="Search Pin Code..."
                                    onchange={handleInputChange} data-id="shippingPincode">
                                </lightning-record-picker>
                            </template>
                        </div>


                        <!-- City -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-record-picker label="Shipping City" object-api-name="City__c"
                                display-field="Name" if:true={shippingCityId} value-field="Id"
                                placeholder="Search City..." value={shippingCityId} onchange={handleInputChange}
                                data-id="shippingCityId">
                            </lightning-record-picker>
                            <lightning-record-picker label="Shipping City" object-api-name="City__c"
                                display-field="Name" if:false={shippingCityId} value-field="Id"
                                placeholder="Search City..." onchange={handleInputChange} data-id="shippingCityId">
                            </lightning-record-picker>
                        </div>

                        <!-- Shipping State -->
                        <div class="slds-col slds-size_1-of-3">
                            <template if:true={shippingStateId}>
                                <lightning-record-picker label="Shipping State" object-api-name="State__c"
                                    display-field="Name" value-field="Id" placeholder="Search State..."
                                    value={shippingStateId} onchange={handleInputChange} data-id="shippingStateId">
                                </lightning-record-picker>
                            </template>
                            <template if:false={shippingStateId}>
                                <lightning-record-picker label="Shipping State" object-api-name="State__c"
                                    display-field="Name" value-field="Id" placeholder="Search State..."
                                    onchange={handleInputChange} data-id="shippingStateId">
                                </lightning-record-picker>
                            </template>
                        </div>


                        <!-- Country -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-combobox name="shippingCountry" label="Shipping Country"
                                value={shippingCountryId} options={countryOptions} onchange={handleInputChange}
                                data-id="shippingCountryId">
                            </lightning-combobox>
                        </div>

                        <!-- Region -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-combobox name="shippingRegion" label="Shipping Region"
                                value={shippingRegionValue} options={regionOptions} onchange={handleInputChange}
                                data-id="shippingRegion">
                            </lightning-combobox>
                        </div>

                        <!-- Zone -->
                        <div class="slds-col slds-size_1-of-3">
                            <lightning-combobox name="shippingZone" label="Shipping Zone" value={shippingZoneValue}
                                options={zoneOptions} onchange={handleInputChange} data-id="shippingZone">
                            </lightning-combobox>
                        </div>
                    </div>

                    <!-- Footer Buttons -->
                    <div class="slds-border_top slds-p-top_medium slds-text-align_center">
                        <lightning-button type="submit" label="Save" variant="brand" onclick={handleSuccess}
                            class="slds-m-right_small" disabled={isPinCodeLoading}>
                        </lightning-button>
                        <lightning-button label="Cancel" variant="neutral" onclick={handleCancel}
                            disabled={isPinCodeLoading}>
                        </lightning-button>
                    </div>
                </lightning-record-edit-form>
            </div>
        </lightning-card>
    </div>
</template>