<template>
    <div class="lookup-container">
        <lightning-input
            label="Search Lead"
            value={searchKey}
            placeholder={placeholder}
            onchange={handleInputChange}
            disabled={selectedRecord}
        ></lightning-input>

        <template if:true={isDropdownVisible}>
            <ul class="dropdown">
                <template for:each={searchResults} for:item="record">
                    <li key={record.Id} class="dropdown-item" data-id={record.Id} onclick={handleSelect}>
                        <strong>{record.Name}</strong><br />
                        <template if:true={record.sapCode}>
                            <small>Customer: {record.sapCode}</small>
                        </template>
                        <template if:true={record.billToaddress}>
                            <lightning-helptext content={record.billToaddress}></lightning-helptext>
                        </template>
                        <template if:true={record.shipToaddress}>
                            <lightning-helptext content={record.shipToaddress}></lightning-helptext>
                        </template>
                    </li>
                </template>
            </ul>
        </template>

        <template if:true={selectedRecord}>
            <div class="selected-record">
                Selected: {selectedRecord.Name}
                <lightning-button-icon
                    icon-name="utility:close"
                    alternative-text="Clear"
                    onclick={clearSelection}
                ></lightning-button-icon>
            </div>
        </template>
    </div>
</template>