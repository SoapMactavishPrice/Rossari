<template>
    <label class="slds-form-element__label">Customer Visited</label>

    <!-- 🔍 Search Input -->
    <div class="slds-form-element">
        <div class="slds-combobox_container">
            <input type="text" class="slds-input" placeholder="Search accounts..." value={searchKey}
                onkeyup={handleKeyChange} />

            <!-- 🔽 Search Results -->
            <template if:true={showDropdown}>
                <div class="slds-dropdown slds-dropdown_length-5 slds-dropdown_fluid">
                    <ul class="slds-listbox slds-listbox_vertical" role="listbox">
                        <template for:each={searchResults} for:item="record">
                            <li key={record.Id} class="slds-listbox__item" role="presentation">
                                <div class="slds-listbox__option slds-listbox__option_entity" role="option"
                                    data-id={record.Id} data-name={record.Name} onclick={handleSelect}>
                                    <span class="slds-media__body">
                                        <span class="slds-listbox__option-text">{record.Name}</span>
                                    </span>
                                </div>
                            </li>
                        </template>
                    </ul>
                </div>
            </template>
        </div>
    </div>

    <!-- 💊 Pills (max 3 per row) using SLDS Grid -->
    <!-- <template if:true={selectedAccounts.length}>
        <div class="slds-grid slds-wrap slds-m-top_x-small">
            <template for:each={selectedAccounts} for:item="acc">
                <div key={acc.Id} class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-p-around_xx-small">
                    <span class="slds-pill">
                        <span class="slds-pill__label">{acc.Name}</span>
                        <button class="slds-button slds-button_icon slds-pill__remove" data-id={acc.Id}
                            onclick={handleRemove}>
                            <lightning-icon icon-name="utility:close" size="xx-small"></lightning-icon>
                        </button>
                    </span>
                </div>
            </template>
        </div>
    </template> -->

    <template if:true={selectedAccounts.length}>
        <div class="slds-grid slds-nowrap slds-m-top_x-small" style="gap: 0.25rem;">
            <template for:each={selectedAccounts} for:item="acc">
                <div key={acc.Id} class="slds-grow-none">
                    <span class="slds-pill">
                        <span class="slds-pill__label">{acc.Name}</span>
                        <button class="slds-button slds-button_icon slds-pill__remove" data-id={acc.Id}
                            onclick={handleRemove}>
                            <lightning-icon icon-name="utility:close" size="xx-small"></lightning-icon>
                        </button>
                    </span>
                </div>
            </template>
        </div>
    </template>

</template>